<script>
import Header from './Header.vue';
import Button from './Button.vue';

export default {
    name: 'HeroSection',
    components: {
        Header,
        Button
    },
    data() {
        return {
            isPlaying: true,
            captionsOn: false
        }
    },

    mounted() {
        const video = this.$refs.heroVideo;
        if (video) {
            video.play().catch(() => {
                this.isPlaying = false;
            });
        }
    },
    methods: {
        togglePlayPauseOnVideo() {
            const video = this.$refs.heroVideo
            if (this.isPlaying) {
                video.pause()
                this.isPlaying = false
            } else {
                video.play()
                this.isPlaying = true
            }
        },
        toggleCaptions() {
            const track = this.$refs.heroVideo.textTracks[0];

            if (this.captionsOn) {
                track.mode = "disabled";
                this.captionsOn = false;
            } else {
                track.mode = "showing";
                this.captionsOn = true;
            }
        }
    },

}
</script>
<template>
    <Header class="header-component"></Header>
    <div class="hero-section">
        <video class="hero-movie" autoplay muted loop ref="heroVideo"
            aria-label="Looping background video of a girl sipping on a spooky drink. No audio.">
            <source src="/videos/HeroMovie.mp4" type="video/mp4" />
            <track kind="captions" src="/videos/HeroMovie_captions.vtt" srclang="en" label="English captions" />
        </video>
        <button class="hero-video-pause-toggle" @click="togglePlayPauseOnVideo"
            :aria-label="isPlaying ? 'Pause video' : 'Play video'">
            <span v-if="isPlaying">
                <!-- Pause icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="20" viewBox="0 0 15 20" fill="none">
                    <rect y="20" width="20" height="5" rx="2.5" transform="rotate(-90 0 20)" fill="#D80A36" />
                    <rect x="10" y="20" width="20" height="5" rx="2.5" transform="rotate(-90 10 20)" fill="#D80A36" />
                </svg>
            </span>

            <span v-else>
                <!-- Play icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="25" viewBox="0 0 22 25" fill="none">
                    <path
                        d="M20.25 9.49964C22.25 10.6543 22.25 13.5411 20.25 14.6958L4.49999 23.7891C2.49999 24.9438 -1.21966e-06 23.5004 -1.11872e-06 21.191L-3.23758e-07 3.00444C-2.22811e-07 0.695043 2.5 -0.748327 4.5 0.406374L20.25 9.49964Z"
                        fill="#D80A36" />
                </svg>
            </span>
        </button>
        <button class="hero-video-captions-toggle" @click="toggleCaptions"
            :aria-label="captionsOn ? 'Hide captions' : 'Show captions'">
            <span v-if="!captionsOn">
                <svg xmlns="http://www.w3.org/2000/svg" width="31" height="27" viewBox="0 0 31 31" fill="none">
                    <g transform="translate(0, 4)">

                        <mask id="path-1-inside-1_990_941" fill="white">
                            <path
                                d="M26.6406 0C28.8497 1.97764e-05 30.6406 1.79087 30.6406 4V16.792C30.6405 19.001 28.8497 20.792 26.6406 20.792H13.4707L10.1455 26.0283C9.75269 26.6468 8.84985 26.6468 8.45703 26.0283L5.13184 20.792H4C1.79092 20.792 8.74703e-05 19.0011 0 16.792V4C2.36538e-06 1.79086 1.79086 3.20458e-08 4 0H26.6406Z" />
                        </mask>
                        <path
                            d="M26.6406 0L26.6406 -2.5H26.6406V0ZM30.6406 16.792L33.1406 16.7921V16.792H30.6406ZM26.6406 20.792L26.6406 23.292L26.6406 23.292L26.6406 20.792ZM13.4707 20.792V18.292H12.0968L11.3603 19.4518L13.4707 20.792ZM10.1455 26.0283L12.2559 27.3686L12.2559 27.3685L10.1455 26.0283ZM8.45703 26.0283L6.3466 27.3685L6.34666 27.3686L8.45703 26.0283ZM5.13184 20.792L7.24227 19.4518L6.50575 18.292H5.13184V20.792ZM4 20.792L4 23.292H4V20.792ZM0 16.792L-2.5 16.792L-2.5 16.7921L0 16.792ZM0 4L-2.5 4V4H0ZM4 0L4 -2.5L4 0ZM26.6406 0L26.6406 2.5C27.4691 2.50001 28.1406 3.17161 28.1406 4H30.6406H33.1406C33.1406 0.410139 30.2304 -2.49997 26.6406 -2.5L26.6406 0ZM30.6406 4H28.1406V16.792H30.6406H33.1406V4H30.6406ZM30.6406 16.792L28.1406 16.7919C28.1406 17.6204 27.4689 18.292 26.6406 18.292L26.6406 20.792L26.6406 23.292C30.2305 23.292 33.1405 20.3817 33.1406 16.7921L30.6406 16.792ZM26.6406 20.792V18.292H13.4707V20.792V23.292H26.6406V20.792ZM13.4707 20.792L11.3603 19.4518L8.03507 24.6881L10.1455 26.0283L12.2559 27.3685L15.5811 22.1322L13.4707 20.792ZM10.1455 26.0283L8.03513 24.6881C8.62436 23.7603 9.97818 23.7603 10.5674 24.6881L8.45703 26.0283L6.34666 27.3686C7.72151 29.5334 10.881 29.5334 12.2559 27.3686L10.1455 26.0283ZM8.45703 26.0283L10.5675 24.6881L7.24227 19.4518L5.13184 20.792L3.0214 22.1322L6.3466 27.3685L8.45703 26.0283ZM5.13184 20.792V18.292H4V20.792V23.292H5.13184V20.792ZM4 20.792L4 18.292C3.17173 18.292 2.50003 17.6204 2.5 16.7919L0 16.792L-2.5 16.7921C-2.49986 20.3817 0.410108 23.292 4 23.292L4 20.792ZM0 16.792H2.5V4H0H-2.5V16.792H0ZM0 4L2.5 4C2.5 3.17157 3.17158 2.5 4 2.5L4 0L4 -2.5C0.410148 -2.5 -2.5 0.410153 -2.5 4L0 4ZM4 0V2.5H26.6406V0V-2.5H4V0Z"
                            fill="#D80A36" mask="url(#path-1-inside-1_990_941)" />
                        <path
                            d="M20.7139 5.99103C21.4372 5.99104 22.0915 6.13101 22.6729 6.41486L22.8907 6.52716C23.3863 6.8026 23.7998 7.17257 24.128 7.63654H24.127C24.5142 8.15432 24.7573 8.75999 24.8594 9.44904L24.8936 9.67853H23.1397L23.1075 9.51837C22.9934 8.95955 22.7333 8.50994 22.3282 8.16095C21.9307 7.81874 21.4107 7.64053 20.751 7.64044C20.1854 7.64044 19.7044 7.77775 19.3008 8.04669C18.8948 8.31735 18.575 8.70322 18.3438 9.21173C18.1131 9.71933 17.9942 10.3214 17.9942 11.0213C17.9942 11.7208 18.1124 12.3288 18.3438 12.8494C18.5756 13.3711 18.8967 13.7689 19.3037 14.0516C19.7199 14.3322 20.2056 14.4753 20.7686 14.4754C21.4033 14.4754 21.9202 14.3033 22.3321 13.9695C22.7479 13.6204 23.0125 13.1714 23.126 12.6151L23.1582 12.4549H24.917L24.878 12.6893C24.777 13.2833 24.5676 13.8213 24.2491 14.3006L24.1055 14.5018C23.7192 15.0167 23.2355 15.4169 22.6563 15.7C22.0755 15.9839 21.433 16.1238 20.7325 16.1238C19.8415 16.1238 19.0386 15.9069 18.3311 15.4695L18.3282 15.4676C17.637 15.0196 17.0875 14.4119 16.6807 13.6492L16.6787 13.6453C16.2835 12.8673 16.088 11.9911 16.0879 11.0213C16.0879 10.0513 16.2839 9.18565 16.6807 8.43048L16.6817 8.42853C17.0889 7.67767 17.6384 7.08179 18.3301 6.6463L18.3311 6.64532C19.0382 6.20822 19.8346 5.99103 20.7139 5.99103Z"
                            fill="#D80A36" stroke="#D80A36" stroke-width="0.4" />
                        <path
                            d="M10.4071 5.99109C11.1304 5.9911 11.7848 6.13107 12.3661 6.41492L12.5839 6.52722C13.0796 6.80266 13.493 7.17263 13.8212 7.6366H13.8202C14.2074 8.15438 14.4505 8.76005 14.5526 9.4491L14.5868 9.67859H12.8329L12.8007 9.51843C12.6866 8.95961 12.4266 8.51 12.0214 8.16101C11.624 7.8188 11.104 7.64059 10.4442 7.6405C9.87861 7.6405 9.39763 7.77781 8.99405 8.04675C8.58806 8.31741 8.26827 8.70328 8.03702 9.21179C7.80629 9.71939 7.68741 10.3214 7.68741 11.0214C7.68745 11.7209 7.80565 12.3288 8.03702 12.8495C8.26886 13.3711 8.58997 13.7689 8.99698 14.0516C9.41316 14.3323 9.89881 14.4754 10.4618 14.4755C11.0965 14.4755 11.6134 14.3034 12.0253 13.9696C12.4411 13.6205 12.7057 13.1715 12.8192 12.6151L12.8515 12.455H14.6103L14.5712 12.6893C14.4703 13.2833 14.2608 13.8213 13.9423 14.3007L13.7987 14.5018C13.4125 15.0167 12.9287 15.4169 12.3495 15.7001C11.7688 15.9839 11.1263 16.1239 10.4257 16.1239C9.53474 16.1239 8.73187 15.907 8.02432 15.4696L8.02139 15.4677C7.33022 15.0197 6.78071 14.412 6.37393 13.6493L6.37198 13.6454C5.9767 12.8674 5.78121 11.9912 5.78116 11.0214C5.78116 10.0513 5.97715 9.18571 6.37393 8.43054L6.37491 8.42859C6.78215 7.67773 7.33169 7.08185 8.02335 6.64636L8.02432 6.64539C8.7314 6.20828 9.52785 5.99109 10.4071 5.99109Z"
                            fill="#D80A36" stroke="#D80A36" stroke-width="0.4" />

                    </g>


                </svg>
            </span>
            <span v-else>

                <svg xmlns="http://www.w3.org/2000/svg" width="31" height="27" viewBox="0 0 31 31" fill="none">
                    <g transform="translate(0, 4)">
                        <mask id="path-1-inside-1_990_948" fill="white">
                            <path
                                d="M26.6406 0C28.8497 1.97764e-05 30.6406 1.79087 30.6406 4V16.792C30.6405 19.001 28.8497 20.792 26.6406 20.792H13.4707L10.1455 26.0283C9.75269 26.6468 8.84985 26.6468 8.45703 26.0283L5.13184 20.792H4C1.79092 20.792 8.74703e-05 19.0011 0 16.792V4C2.36538e-06 1.79086 1.79086 3.20458e-08 4 0H26.6406Z" />
                        </mask>
                        <path
                            d="M26.6406 0C28.8497 1.97764e-05 30.6406 1.79087 30.6406 4V16.792C30.6405 19.001 28.8497 20.792 26.6406 20.792H13.4707L10.1455 26.0283C9.75269 26.6468 8.84985 26.6468 8.45703 26.0283L5.13184 20.792H4C1.79092 20.792 8.74703e-05 19.0011 0 16.792V4C2.36538e-06 1.79086 1.79086 3.20458e-08 4 0H26.6406Z"
                            fill="#D80A36" />
                        <path
                            d="M26.6406 0L26.6406 -2.5H26.6406V0ZM30.6406 16.792L33.1406 16.7921V16.792H30.6406ZM26.6406 20.792L26.6406 23.292L26.6406 23.292L26.6406 20.792ZM13.4707 20.792V18.292H12.0968L11.3603 19.4518L13.4707 20.792ZM10.1455 26.0283L12.2559 27.3686L12.2559 27.3685L10.1455 26.0283ZM8.45703 26.0283L6.3466 27.3685L6.34666 27.3686L8.45703 26.0283ZM5.13184 20.792L7.24227 19.4518L6.50575 18.292H5.13184V20.792ZM4 20.792L4 23.292H4V20.792ZM0 16.792L-2.5 16.792L-2.5 16.7921L0 16.792ZM0 4L-2.5 4V4H0ZM4 0L4 -2.5L4 0ZM26.6406 0L26.6406 2.5C27.4691 2.50001 28.1406 3.17161 28.1406 4H30.6406H33.1406C33.1406 0.410139 30.2304 -2.49997 26.6406 -2.5L26.6406 0ZM30.6406 4H28.1406V16.792H30.6406H33.1406V4H30.6406ZM30.6406 16.792L28.1406 16.7919C28.1406 17.6204 27.4689 18.292 26.6406 18.292L26.6406 20.792L26.6406 23.292C30.2305 23.292 33.1405 20.3817 33.1406 16.7921L30.6406 16.792ZM26.6406 20.792V18.292H13.4707V20.792V23.292H26.6406V20.792ZM13.4707 20.792L11.3603 19.4518L8.03507 24.6881L10.1455 26.0283L12.2559 27.3685L15.5811 22.1322L13.4707 20.792ZM10.1455 26.0283L8.03513 24.6881C8.62436 23.7603 9.97818 23.7603 10.5674 24.6881L8.45703 26.0283L6.34666 27.3686C7.72151 29.5334 10.881 29.5334 12.2559 27.3686L10.1455 26.0283ZM8.45703 26.0283L10.5675 24.6881L7.24227 19.4518L5.13184 20.792L3.0214 22.1322L6.3466 27.3685L8.45703 26.0283ZM5.13184 20.792V18.292H4V20.792V23.292H5.13184V20.792ZM4 20.792L4 18.292C3.17173 18.292 2.50003 17.6204 2.5 16.7919L0 16.792L-2.5 16.7921C-2.49986 20.3817 0.410108 23.292 4 23.292L4 20.792ZM0 16.792H2.5V4H0H-2.5V16.792H0ZM0 4L2.5 4C2.5 3.17157 3.17158 2.5 4 2.5L4 0L4 -2.5C0.410148 -2.5 -2.5 0.410153 -2.5 4L0 4ZM4 0V2.5H26.6406V0V-2.5H4V0Z"
                            fill="#D80A36" mask="url(#path-1-inside-1_990_948)" />
                        <path
                            d="M20.7139 5.99103C21.4372 5.99104 22.0915 6.13101 22.6729 6.41486L22.8907 6.52716C23.3863 6.8026 23.7998 7.17257 24.128 7.63654H24.127C24.5142 8.15432 24.7573 8.75999 24.8594 9.44904L24.8936 9.67853H23.1397L23.1075 9.51837C22.9934 8.95955 22.7333 8.50994 22.3282 8.16095C21.9307 7.81874 21.4107 7.64053 20.751 7.64044C20.1854 7.64044 19.7044 7.77775 19.3008 8.04669C18.8948 8.31735 18.575 8.70322 18.3438 9.21173C18.1131 9.71933 17.9942 10.3214 17.9942 11.0213C17.9942 11.7208 18.1124 12.3288 18.3438 12.8494C18.5756 13.3711 18.8967 13.7689 19.3037 14.0516C19.7199 14.3322 20.2056 14.4753 20.7686 14.4754C21.4033 14.4754 21.9202 14.3033 22.3321 13.9695C22.7479 13.6204 23.0125 13.1714 23.126 12.6151L23.1582 12.4549H24.917L24.878 12.6893C24.777 13.2833 24.5676 13.8213 24.2491 14.3006L24.1055 14.5018C23.7192 15.0167 23.2355 15.4169 22.6563 15.7C22.0755 15.9839 21.433 16.1238 20.7325 16.1238C19.8415 16.1238 19.0386 15.9069 18.3311 15.4695L18.3282 15.4676C17.637 15.0196 17.0875 14.4119 16.6807 13.6492L16.6787 13.6453C16.2835 12.8673 16.088 11.9911 16.0879 11.0213C16.0879 10.0513 16.2839 9.18565 16.6807 8.43048L16.6817 8.42853C17.0889 7.67767 17.6384 7.08179 18.3301 6.6463L18.3311 6.64532C19.0382 6.20822 19.8346 5.99103 20.7139 5.99103Z"
                            fill="#FFFFF0" stroke="#FFFFF0" stroke-width="0.4" />
                        <path
                            d="M10.4071 5.99109C11.1304 5.9911 11.7848 6.13107 12.3661 6.41492L12.5839 6.52722C13.0796 6.80266 13.493 7.17263 13.8212 7.6366H13.8202C14.2074 8.15438 14.4505 8.76005 14.5526 9.4491L14.5868 9.67859H12.8329L12.8007 9.51843C12.6866 8.95961 12.4266 8.51 12.0214 8.16101C11.624 7.8188 11.104 7.64059 10.4442 7.6405C9.87861 7.6405 9.39763 7.77781 8.99405 8.04675C8.58806 8.31741 8.26827 8.70328 8.03702 9.21179C7.80629 9.71939 7.68741 10.3214 7.68741 11.0214C7.68745 11.7209 7.80565 12.3288 8.03702 12.8495C8.26886 13.3711 8.58997 13.7689 8.99698 14.0516C9.41316 14.3323 9.89881 14.4754 10.4618 14.4755C11.0965 14.4755 11.6134 14.3034 12.0253 13.9696C12.4411 13.6205 12.7057 13.1715 12.8192 12.6151L12.8515 12.455H14.6103L14.5712 12.6893C14.4703 13.2833 14.2608 13.8213 13.9423 14.3007L13.7987 14.5018C13.4125 15.0167 12.9287 15.4169 12.3495 15.7001C11.7688 15.9839 11.1263 16.1239 10.4257 16.1239C9.53474 16.1239 8.73187 15.907 8.02432 15.4696L8.02139 15.4677C7.33022 15.0197 6.78071 14.412 6.37393 13.6493L6.37198 13.6454C5.9767 12.8674 5.78121 11.9912 5.78116 11.0214C5.78116 10.0513 5.97715 9.18571 6.37393 8.43054L6.37491 8.42859C6.78215 7.67773 7.33169 7.08185 8.02335 6.64636L8.02432 6.64539C8.7314 6.20828 9.52785 5.99109 10.4071 5.99109Z"
                            fill="#FFFFF0" stroke="#FFFFF0" stroke-width="0.4" />
                    </g>

                </svg>
            </span>
        </button>

        <div class=" title-and-button">
            <h1>CHEERS <br>WITCHES!</h1>
            <Button to="/recipes/category/boos-and-brews" btnText="Boo season!" variant="primary" :showArrow="true"
                :disabled="false"></Button>
        </div>
        <img class="swirl-text" src="/img/swirl-text.svg" alt="Banner saying Spooky season is here">
    </div>
</template>
<style scoped>
.hero-section {
    margin-bottom: 0px;
}

.hero-movie {
    position: absolute;
    top: 0;
    width: 100%;
    height: auto;
}

.swirl-text {
    position: relative;
    margin-top: 0px;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    pointer-events: none;
    z-index: 0;
}

h1 {
    color: var(--red-color);
    font-family: "Kalnia";
    font-size: 88px;
    line-height: 1;
    margin-bottom: 32px;
}

.title-and-button {
    position: relative;
    left: 60%;
    margin-top: 200px;
    z-index: 1;
}

.header-component {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1;
}

.hero-video-pause-toggle {
    position: absolute;
    width: 50px;
    height: 50px;
    border: none;
    cursor: pointer;
    border-radius: 50%;
    background-color: var(--white-color);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 20px;
    top: 0px;
    z-index: 1;
}

.hero-video-captions-toggle {
    position: absolute;
    width: 50px;
    height: 50px;
    border: none;
    cursor: pointer;
    border-radius: 50%;
    background-color: var(--white-color);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 20px;
    top: 60px;
    z-index: 1;
}

/* Viktigt för WCAG: tydlig focus-stil för tangentbordsanvändare */
/* .hero-video-toggle:focus-visible {
    outline: 2px solid black;
    outline-offset: 2px;
} */
@media (min-width: 3300px) {
    .hero-section {
        margin-bottom: 500px;
    }
}

@media (max-width: 3299px) {
    .hero-section {
        margin-bottom: 300px;
    }
}

@media (max-width: 3000px) {
    .hero-section {
        margin-bottom: 300px;
    }
}

@media (max-width: 2600px) {
    .hero-section {
        margin-bottom: 200px;
    }
}

@media (max-width: 2300px) {
    .hero-section {
        margin-bottom: 100px;
    }
}

@media (max-width: 2000px) {
    .hero-section {
        margin-bottom: 40px;
    }
}

@media (max-width: 1399px) {
    .title-and-button {
        left: 50%;
        margin-top: 80px;
        ;
    }

    .swirl-text {
        margin-top: -50px;

    }

    .hero-section {
        margin-bottom: 0px;
    }

    .hero-movie {
        position: absolute;
        top: 0;
        width: 100%;
        height: auto;
    }
}

@media (max-width: 1199px) {
    .title-and-button {
        left: 45%;
    }
}

@media (max-width: 991px) {
    .title-and-button {
        left: 50%;
        margin-top: 35px;
    }

    .swirl-text {
        margin-top: -60px;
    }

    h1 {
        font-size: 51px;
    }

}

@media (max-width: 767px) {


    .hero-movie {
        margin-top: 100px;

    }

    .title-and-button {
        left: 45%;
    }

    .swirl-text {
        margin-top: -0px;
    }

    .hero-video-pause-toggle {

        top: 100px;
    }

    .hero-video-captions-toggle {

        top: 160px;
    }
}


@media (max-width: 575px) {

    .title-and-button {
        left: 0%;
        padding: 24px;
    }

    .swirl-text {
        margin-top: -80px;
        width: 200%
    }

    .hero-movie {
        width: 170%
    }

    .hero-video-pause-toggle {
        top: 110px;
        right: 10px;
    }

    .hero-video-captions-toggle {
        top: 170px;
        right: 10px;
    }
}
</style>
